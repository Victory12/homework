# однострочник 1
# на вход получает список файлов выводимых командой dir
# полученный поток разбивает на колонки и выводит в виде таблицы с разделителем ';'
#Результат работы программы средствами шела сохраняем в файл.

dir /a:-s-d /-c | perl -ne "if(/^\d{2}\./){s/(\S+)[ ]+(\S+)[ ]+(\S+)[ ]+/$1;$2;$3;/; print $_;}">>done.csv

# однострочник 2
# читает со стандартного входа файл созданый в 1 задании
# выводит на экран название файлов размер которых больше 1 мегабайта
# Последней строкой выводит общее кол-во строк в таблице, и количество строк удовлетворяющее условию.

#старый вариант
perl -lnaF';' -e "$all++; if($F[2]>1048576){$yes++;print $F[3]}; }{ $yes*=1;$all*=1; print qq{\nRight files:$yes;\nAll files :$all;}" done.csv

#новый вариант 
perl -lnaF';' -e "if($F[2]>1048576){$yes++;print $F[3]}; }{ $yes*=1; print qq{\nRight files:$yes;\nAll files :$.;}" done.csv

# однострочник 3 (1 вариант)
# берет файл из задания 1
# строит структуру данных в виде массива массивов
# распечатает его при помощи модулей DDP и Data::Dumper

#старый вариант
perl -MData::Dumper -MDDP -ne "push @$ref_AoA,[split(/;/)]; }{ print Dumper($ref_AoA); p($ref_AoA);" done.csv      

#новый вариант 
perl -MData::Dumper -MDDP -naF';' -e "push @$ref_AoA,[@F]; }{ print Dumper($ref_AoA); p($ref_AoA);" done.csv
